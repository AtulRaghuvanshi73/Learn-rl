"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/y-indexeddb";
exports.ids = ["vendor-chunks/y-indexeddb"];
exports.modules = {

/***/ "(ssr)/./node_modules/y-indexeddb/src/y-indexeddb.js":
/*!*****************************************************!*\
  !*** ./node_modules/y-indexeddb/src/y-indexeddb.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexeddbPersistence: () => (/* binding */ IndexeddbPersistence),\n/* harmony export */   PREFERRED_TRIM_SIZE: () => (/* binding */ PREFERRED_TRIM_SIZE),\n/* harmony export */   clearDocument: () => (/* binding */ clearDocument),\n/* harmony export */   fetchUpdates: () => (/* binding */ fetchUpdates),\n/* harmony export */   storeState: () => (/* binding */ storeState)\n/* harmony export */ });\n/* harmony import */ var yjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! yjs */ \"(ssr)/./node_modules/yjs/dist/yjs.mjs\");\n/* harmony import */ var lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib0/indexeddb */ \"(ssr)/./node_modules/lib0/indexeddb.js\");\n/* harmony import */ var lib0_promise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lib0/promise */ \"(ssr)/./node_modules/lib0/promise.js\");\n/* harmony import */ var lib0_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lib0/observable */ \"(ssr)/./node_modules/lib0/observable.js\");\n\n\n\n\n\nconst customStoreName = 'custom'\nconst updatesStoreName = 'updates'\n\nconst PREFERRED_TRIM_SIZE = 500\n\n/**\n * @param {IndexeddbPersistence} idbPersistence\n * @param {function(IDBObjectStore):void} [beforeApplyUpdatesCallback]\n * @param {function(IDBObjectStore):void} [afterApplyUpdatesCallback]\n */\nconst fetchUpdates = (idbPersistence, beforeApplyUpdatesCallback = () => {}, afterApplyUpdatesCallback = () => {}) => {\n  const [updatesStore] = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.transact(/** @type {IDBDatabase} */ (idbPersistence.db), [updatesStoreName]) // , 'readonly')\n  return lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.getAll(updatesStore, lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.createIDBKeyRangeLowerBound(idbPersistence._dbref, false)).then(updates => {\n    if (!idbPersistence._destroyed) {\n      beforeApplyUpdatesCallback(updatesStore)\n      yjs__WEBPACK_IMPORTED_MODULE_1__.transact(idbPersistence.doc, () => {\n        updates.forEach(val => yjs__WEBPACK_IMPORTED_MODULE_1__.applyUpdate(idbPersistence.doc, val))\n      }, idbPersistence, false)\n      afterApplyUpdatesCallback(updatesStore)\n    }\n  })\n    .then(() => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.getLastKey(updatesStore).then(lastKey => { idbPersistence._dbref = lastKey + 1 }))\n    .then(() => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.count(updatesStore).then(cnt => { idbPersistence._dbsize = cnt }))\n    .then(() => updatesStore)\n}\n\n/**\n * @param {IndexeddbPersistence} idbPersistence\n * @param {boolean} forceStore\n */\nconst storeState = (idbPersistence, forceStore = true) =>\n  fetchUpdates(idbPersistence)\n    .then(updatesStore => {\n      if (forceStore || idbPersistence._dbsize >= PREFERRED_TRIM_SIZE) {\n        lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.addAutoKey(updatesStore, yjs__WEBPACK_IMPORTED_MODULE_1__.encodeStateAsUpdate(idbPersistence.doc))\n          .then(() => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.del(updatesStore, lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.createIDBKeyRangeUpperBound(idbPersistence._dbref, true)))\n          .then(() => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.count(updatesStore).then(cnt => { idbPersistence._dbsize = cnt }))\n      }\n    })\n\n/**\n * @param {string} name\n */\nconst clearDocument = name => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.deleteDB(name)\n\n/**\n * @extends Observable<string>\n */\nclass IndexeddbPersistence extends lib0_observable__WEBPACK_IMPORTED_MODULE_2__.Observable {\n  /**\n   * @param {string} name\n   * @param {Y.Doc} doc\n   */\n  constructor (name, doc) {\n    super()\n    this.doc = doc\n    this.name = name\n    this._dbref = 0\n    this._dbsize = 0\n    this._destroyed = false\n    /**\n     * @type {IDBDatabase|null}\n     */\n    this.db = null\n    this.synced = false\n    this._db = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.openDB(name, db =>\n      lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.createStores(db, [\n        ['updates', { autoIncrement: true }],\n        ['custom']\n      ])\n    )\n    /**\n     * @type {Promise<IndexeddbPersistence>}\n     */\n    this.whenSynced = lib0_promise__WEBPACK_IMPORTED_MODULE_3__.create(resolve => this.on('synced', () => resolve(this)))\n\n    this._db.then(db => {\n      this.db = db\n      /**\n       * @param {IDBObjectStore} updatesStore\n       */\n      const beforeApplyUpdatesCallback = (updatesStore) => lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.addAutoKey(updatesStore, yjs__WEBPACK_IMPORTED_MODULE_1__.encodeStateAsUpdate(doc))\n      const afterApplyUpdatesCallback = () => {\n        if (this._destroyed) return this\n        this.synced = true\n        this.emit('synced', [this])\n      }\n      fetchUpdates(this, beforeApplyUpdatesCallback, afterApplyUpdatesCallback)\n    })\n    /**\n     * Timeout in ms untill data is merged and persisted in idb.\n     */\n    this._storeTimeout = 1000\n    /**\n     * @type {any}\n     */\n    this._storeTimeoutId = null\n    /**\n     * @param {Uint8Array} update\n     * @param {any} origin\n     */\n    this._storeUpdate = (update, origin) => {\n      if (this.db && origin !== this) {\n        const [updatesStore] = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.transact(/** @type {IDBDatabase} */ (this.db), [updatesStoreName])\n        lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.addAutoKey(updatesStore, update)\n        if (++this._dbsize >= PREFERRED_TRIM_SIZE) {\n          // debounce store call\n          if (this._storeTimeoutId !== null) {\n            clearTimeout(this._storeTimeoutId)\n          }\n          this._storeTimeoutId = setTimeout(() => {\n            storeState(this, false)\n            this._storeTimeoutId = null\n          }, this._storeTimeout)\n        }\n      }\n    }\n    doc.on('update', this._storeUpdate)\n    this.destroy = this.destroy.bind(this)\n    doc.on('destroy', this.destroy)\n  }\n\n  destroy () {\n    if (this._storeTimeoutId) {\n      clearTimeout(this._storeTimeoutId)\n    }\n    this.doc.off('update', this._storeUpdate)\n    this.doc.off('destroy', this.destroy)\n    this._destroyed = true\n    return this._db.then(db => {\n      db.close()\n    })\n  }\n\n  /**\n   * Destroys this instance and removes all data from indexeddb.\n   *\n   * @return {Promise<void>}\n   */\n  clearData () {\n    return this.destroy().then(() => {\n      lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.deleteDB(this.name)\n    })\n  }\n\n  /**\n   * @param {String | number | ArrayBuffer | Date} key\n   * @return {Promise<String | number | ArrayBuffer | Date | any>}\n   */\n  get (key) {\n    return this._db.then(db => {\n      const [custom] = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.transact(db, [customStoreName], 'readonly')\n      return lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.get(custom, key)\n    })\n  }\n\n  /**\n   * @param {String | number | ArrayBuffer | Date} key\n   * @param {String | number | ArrayBuffer | Date} value\n   * @return {Promise<String | number | ArrayBuffer | Date>}\n   */\n  set (key, value) {\n    return this._db.then(db => {\n      const [custom] = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.transact(db, [customStoreName])\n      return lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.put(custom, value, key)\n    })\n  }\n\n  /**\n   * @param {String | number | ArrayBuffer | Date} key\n   * @return {Promise<undefined>}\n   */\n  del (key) {\n    return this._db.then(db => {\n      const [custom] = lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.transact(db, [customStoreName])\n      return lib0_indexeddb__WEBPACK_IMPORTED_MODULE_0__.del(custom, key)\n    })\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMveS1pbmRleGVkZGIvc3JjL3ktaW5kZXhlZGRiLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNhO0FBQ0U7QUFDSzs7QUFFNUM7QUFDQTs7QUFFTzs7QUFFUDtBQUNBLFdBQVcsc0JBQXNCO0FBQ2pDLFdBQVcsK0JBQStCO0FBQzFDLFdBQVcsK0JBQStCO0FBQzFDO0FBQ08sMkVBQTJFLHNDQUFzQztBQUN4SCx5QkFBeUIsb0RBQVksWUFBWSxhQUFhO0FBQzlELFNBQVMsa0RBQVUsZUFBZSx1RUFBK0I7QUFDakU7QUFDQTtBQUNBLE1BQU0seUNBQVU7QUFDaEIsK0JBQStCLDRDQUFhO0FBQzVDLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixzREFBYyxpQ0FBaUMscUNBQXFDO0FBQ3BHLGdCQUFnQixpREFBUyw2QkFBNkIsOEJBQThCO0FBQ3BGO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLHNCQUFzQjtBQUNqQyxXQUFXLFNBQVM7QUFDcEI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQWMsZUFBZSxvREFBcUI7QUFDMUQsc0JBQXNCLCtDQUFPLGVBQWUsdUVBQStCO0FBQzNFLHNCQUFzQixpREFBUyw2QkFBNkIsOEJBQThCO0FBQzFGO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNPLDhCQUE4QixvREFBWTs7QUFFakQ7QUFDQTtBQUNBO0FBQ08sbUNBQW1DLHVEQUFVO0FBQ3BEO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrREFBVTtBQUN6QixNQUFNLHdEQUFnQjtBQUN0QixzQkFBc0IscUJBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0Esc0JBQXNCLGdEQUFjOztBQUVwQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0EsMkRBQTJELHNEQUFjLGVBQWUsb0RBQXFCO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFZLFlBQVksYUFBYTtBQUNwRSxRQUFRLHNEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFZO0FBQ2xCLEtBQUs7QUFDTDs7QUFFQTtBQUNBLGFBQWEsc0NBQXNDO0FBQ25ELGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQVk7QUFDbkMsYUFBYSwrQ0FBTztBQUNwQixLQUFLO0FBQ0w7O0FBRUE7QUFDQSxhQUFhLHNDQUFzQztBQUNuRCxhQUFhLHNDQUFzQztBQUNuRCxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFZO0FBQ25DLGFBQWEsK0NBQU87QUFDcEIsS0FBSztBQUNMOztBQUVBO0FBQ0EsYUFBYSxzQ0FBc0M7QUFDbkQsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvREFBWTtBQUNuQyxhQUFhLCtDQUFPO0FBQ3BCLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVhcm4tcmwvLi9ub2RlX21vZHVsZXMveS1pbmRleGVkZGIvc3JjL3ktaW5kZXhlZGRiLmpzP2M1M2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgWSBmcm9tICd5anMnXG5pbXBvcnQgKiBhcyBpZGIgZnJvbSAnbGliMC9pbmRleGVkZGInXG5pbXBvcnQgKiBhcyBwcm9taXNlIGZyb20gJ2xpYjAvcHJvbWlzZSdcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdsaWIwL29ic2VydmFibGUnXG5cbmNvbnN0IGN1c3RvbVN0b3JlTmFtZSA9ICdjdXN0b20nXG5jb25zdCB1cGRhdGVzU3RvcmVOYW1lID0gJ3VwZGF0ZXMnXG5cbmV4cG9ydCBjb25zdCBQUkVGRVJSRURfVFJJTV9TSVpFID0gNTAwXG5cbi8qKlxuICogQHBhcmFtIHtJbmRleGVkZGJQZXJzaXN0ZW5jZX0gaWRiUGVyc2lzdGVuY2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oSURCT2JqZWN0U3RvcmUpOnZvaWR9IFtiZWZvcmVBcHBseVVwZGF0ZXNDYWxsYmFja11cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oSURCT2JqZWN0U3RvcmUpOnZvaWR9IFthZnRlckFwcGx5VXBkYXRlc0NhbGxiYWNrXVxuICovXG5leHBvcnQgY29uc3QgZmV0Y2hVcGRhdGVzID0gKGlkYlBlcnNpc3RlbmNlLCBiZWZvcmVBcHBseVVwZGF0ZXNDYWxsYmFjayA9ICgpID0+IHt9LCBhZnRlckFwcGx5VXBkYXRlc0NhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcbiAgY29uc3QgW3VwZGF0ZXNTdG9yZV0gPSBpZGIudHJhbnNhY3QoLyoqIEB0eXBlIHtJREJEYXRhYmFzZX0gKi8gKGlkYlBlcnNpc3RlbmNlLmRiKSwgW3VwZGF0ZXNTdG9yZU5hbWVdKSAvLyAsICdyZWFkb25seScpXG4gIHJldHVybiBpZGIuZ2V0QWxsKHVwZGF0ZXNTdG9yZSwgaWRiLmNyZWF0ZUlEQktleVJhbmdlTG93ZXJCb3VuZChpZGJQZXJzaXN0ZW5jZS5fZGJyZWYsIGZhbHNlKSkudGhlbih1cGRhdGVzID0+IHtcbiAgICBpZiAoIWlkYlBlcnNpc3RlbmNlLl9kZXN0cm95ZWQpIHtcbiAgICAgIGJlZm9yZUFwcGx5VXBkYXRlc0NhbGxiYWNrKHVwZGF0ZXNTdG9yZSlcbiAgICAgIFkudHJhbnNhY3QoaWRiUGVyc2lzdGVuY2UuZG9jLCAoKSA9PiB7XG4gICAgICAgIHVwZGF0ZXMuZm9yRWFjaCh2YWwgPT4gWS5hcHBseVVwZGF0ZShpZGJQZXJzaXN0ZW5jZS5kb2MsIHZhbCkpXG4gICAgICB9LCBpZGJQZXJzaXN0ZW5jZSwgZmFsc2UpXG4gICAgICBhZnRlckFwcGx5VXBkYXRlc0NhbGxiYWNrKHVwZGF0ZXNTdG9yZSlcbiAgICB9XG4gIH0pXG4gICAgLnRoZW4oKCkgPT4gaWRiLmdldExhc3RLZXkodXBkYXRlc1N0b3JlKS50aGVuKGxhc3RLZXkgPT4geyBpZGJQZXJzaXN0ZW5jZS5fZGJyZWYgPSBsYXN0S2V5ICsgMSB9KSlcbiAgICAudGhlbigoKSA9PiBpZGIuY291bnQodXBkYXRlc1N0b3JlKS50aGVuKGNudCA9PiB7IGlkYlBlcnNpc3RlbmNlLl9kYnNpemUgPSBjbnQgfSkpXG4gICAgLnRoZW4oKCkgPT4gdXBkYXRlc1N0b3JlKVxufVxuXG4vKipcbiAqIEBwYXJhbSB7SW5kZXhlZGRiUGVyc2lzdGVuY2V9IGlkYlBlcnNpc3RlbmNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlU3RvcmVcbiAqL1xuZXhwb3J0IGNvbnN0IHN0b3JlU3RhdGUgPSAoaWRiUGVyc2lzdGVuY2UsIGZvcmNlU3RvcmUgPSB0cnVlKSA9PlxuICBmZXRjaFVwZGF0ZXMoaWRiUGVyc2lzdGVuY2UpXG4gICAgLnRoZW4odXBkYXRlc1N0b3JlID0+IHtcbiAgICAgIGlmIChmb3JjZVN0b3JlIHx8IGlkYlBlcnNpc3RlbmNlLl9kYnNpemUgPj0gUFJFRkVSUkVEX1RSSU1fU0laRSkge1xuICAgICAgICBpZGIuYWRkQXV0b0tleSh1cGRhdGVzU3RvcmUsIFkuZW5jb2RlU3RhdGVBc1VwZGF0ZShpZGJQZXJzaXN0ZW5jZS5kb2MpKVxuICAgICAgICAgIC50aGVuKCgpID0+IGlkYi5kZWwodXBkYXRlc1N0b3JlLCBpZGIuY3JlYXRlSURCS2V5UmFuZ2VVcHBlckJvdW5kKGlkYlBlcnNpc3RlbmNlLl9kYnJlZiwgdHJ1ZSkpKVxuICAgICAgICAgIC50aGVuKCgpID0+IGlkYi5jb3VudCh1cGRhdGVzU3RvcmUpLnRoZW4oY250ID0+IHsgaWRiUGVyc2lzdGVuY2UuX2Ric2l6ZSA9IGNudCB9KSlcbiAgICAgIH1cbiAgICB9KVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBjb25zdCBjbGVhckRvY3VtZW50ID0gbmFtZSA9PiBpZGIuZGVsZXRlREIobmFtZSlcblxuLyoqXG4gKiBAZXh0ZW5kcyBPYnNlcnZhYmxlPHN0cmluZz5cbiAqL1xuZXhwb3J0IGNsYXNzIEluZGV4ZWRkYlBlcnNpc3RlbmNlIGV4dGVuZHMgT2JzZXJ2YWJsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1kuRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yIChuYW1lLCBkb2MpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5kb2MgPSBkb2NcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5fZGJyZWYgPSAwXG4gICAgdGhpcy5fZGJzaXplID0gMFxuICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlXG4gICAgLyoqXG4gICAgICogQHR5cGUge0lEQkRhdGFiYXNlfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5kYiA9IG51bGxcbiAgICB0aGlzLnN5bmNlZCA9IGZhbHNlXG4gICAgdGhpcy5fZGIgPSBpZGIub3BlbkRCKG5hbWUsIGRiID0+XG4gICAgICBpZGIuY3JlYXRlU3RvcmVzKGRiLCBbXG4gICAgICAgIFsndXBkYXRlcycsIHsgYXV0b0luY3JlbWVudDogdHJ1ZSB9XSxcbiAgICAgICAgWydjdXN0b20nXVxuICAgICAgXSlcbiAgICApXG4gICAgLyoqXG4gICAgICogQHR5cGUge1Byb21pc2U8SW5kZXhlZGRiUGVyc2lzdGVuY2U+fVxuICAgICAqL1xuICAgIHRoaXMud2hlblN5bmNlZCA9IHByb21pc2UuY3JlYXRlKHJlc29sdmUgPT4gdGhpcy5vbignc3luY2VkJywgKCkgPT4gcmVzb2x2ZSh0aGlzKSkpXG5cbiAgICB0aGlzLl9kYi50aGVuKGRiID0+IHtcbiAgICAgIHRoaXMuZGIgPSBkYlxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0lEQk9iamVjdFN0b3JlfSB1cGRhdGVzU3RvcmVcbiAgICAgICAqL1xuICAgICAgY29uc3QgYmVmb3JlQXBwbHlVcGRhdGVzQ2FsbGJhY2sgPSAodXBkYXRlc1N0b3JlKSA9PiBpZGIuYWRkQXV0b0tleSh1cGRhdGVzU3RvcmUsIFkuZW5jb2RlU3RhdGVBc1VwZGF0ZShkb2MpKVxuICAgICAgY29uc3QgYWZ0ZXJBcHBseVVwZGF0ZXNDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2Rlc3Ryb3llZCkgcmV0dXJuIHRoaXNcbiAgICAgICAgdGhpcy5zeW5jZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuZW1pdCgnc3luY2VkJywgW3RoaXNdKVxuICAgICAgfVxuICAgICAgZmV0Y2hVcGRhdGVzKHRoaXMsIGJlZm9yZUFwcGx5VXBkYXRlc0NhbGxiYWNrLCBhZnRlckFwcGx5VXBkYXRlc0NhbGxiYWNrKVxuICAgIH0pXG4gICAgLyoqXG4gICAgICogVGltZW91dCBpbiBtcyB1bnRpbGwgZGF0YSBpcyBtZXJnZWQgYW5kIHBlcnNpc3RlZCBpbiBpZGIuXG4gICAgICovXG4gICAgdGhpcy5fc3RvcmVUaW1lb3V0ID0gMTAwMFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHthbnl9XG4gICAgICovXG4gICAgdGhpcy5fc3RvcmVUaW1lb3V0SWQgPSBudWxsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSB1cGRhdGVcbiAgICAgKiBAcGFyYW0ge2FueX0gb3JpZ2luXG4gICAgICovXG4gICAgdGhpcy5fc3RvcmVVcGRhdGUgPSAodXBkYXRlLCBvcmlnaW4pID0+IHtcbiAgICAgIGlmICh0aGlzLmRiICYmIG9yaWdpbiAhPT0gdGhpcykge1xuICAgICAgICBjb25zdCBbdXBkYXRlc1N0b3JlXSA9IGlkYi50cmFuc2FjdCgvKiogQHR5cGUge0lEQkRhdGFiYXNlfSAqLyAodGhpcy5kYiksIFt1cGRhdGVzU3RvcmVOYW1lXSlcbiAgICAgICAgaWRiLmFkZEF1dG9LZXkodXBkYXRlc1N0b3JlLCB1cGRhdGUpXG4gICAgICAgIGlmICgrK3RoaXMuX2Ric2l6ZSA+PSBQUkVGRVJSRURfVFJJTV9TSVpFKSB7XG4gICAgICAgICAgLy8gZGVib3VuY2Ugc3RvcmUgY2FsbFxuICAgICAgICAgIGlmICh0aGlzLl9zdG9yZVRpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3N0b3JlVGltZW91dElkKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9zdG9yZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc3RvcmVTdGF0ZSh0aGlzLCBmYWxzZSlcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlVGltZW91dElkID0gbnVsbFxuICAgICAgICAgIH0sIHRoaXMuX3N0b3JlVGltZW91dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkb2Mub24oJ3VwZGF0ZScsIHRoaXMuX3N0b3JlVXBkYXRlKVxuICAgIHRoaXMuZGVzdHJveSA9IHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpXG4gICAgZG9jLm9uKCdkZXN0cm95JywgdGhpcy5kZXN0cm95KVxuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgaWYgKHRoaXMuX3N0b3JlVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fc3RvcmVUaW1lb3V0SWQpXG4gICAgfVxuICAgIHRoaXMuZG9jLm9mZigndXBkYXRlJywgdGhpcy5fc3RvcmVVcGRhdGUpXG4gICAgdGhpcy5kb2Mub2ZmKCdkZXN0cm95JywgdGhpcy5kZXN0cm95KVxuICAgIHRoaXMuX2Rlc3Ryb3llZCA9IHRydWVcbiAgICByZXR1cm4gdGhpcy5fZGIudGhlbihkYiA9PiB7XG4gICAgICBkYi5jbG9zZSgpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGlzIGluc3RhbmNlIGFuZCByZW1vdmVzIGFsbCBkYXRhIGZyb20gaW5kZXhlZGRiLlxuICAgKlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgY2xlYXJEYXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95KCkudGhlbigoKSA9PiB7XG4gICAgICBpZGIuZGVsZXRlREIodGhpcy5uYW1lKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmcgfCBudW1iZXIgfCBBcnJheUJ1ZmZlciB8IERhdGV9IGtleVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPFN0cmluZyB8IG51bWJlciB8IEFycmF5QnVmZmVyIHwgRGF0ZSB8IGFueT59XG4gICAqL1xuICBnZXQgKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9kYi50aGVuKGRiID0+IHtcbiAgICAgIGNvbnN0IFtjdXN0b21dID0gaWRiLnRyYW5zYWN0KGRiLCBbY3VzdG9tU3RvcmVOYW1lXSwgJ3JlYWRvbmx5JylcbiAgICAgIHJldHVybiBpZGIuZ2V0KGN1c3RvbSwga2V5KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmcgfCBudW1iZXIgfCBBcnJheUJ1ZmZlciB8IERhdGV9IGtleVxuICAgKiBAcGFyYW0ge1N0cmluZyB8IG51bWJlciB8IEFycmF5QnVmZmVyIHwgRGF0ZX0gdmFsdWVcbiAgICogQHJldHVybiB7UHJvbWlzZTxTdHJpbmcgfCBudW1iZXIgfCBBcnJheUJ1ZmZlciB8IERhdGU+fVxuICAgKi9cbiAgc2V0IChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RiLnRoZW4oZGIgPT4ge1xuICAgICAgY29uc3QgW2N1c3RvbV0gPSBpZGIudHJhbnNhY3QoZGIsIFtjdXN0b21TdG9yZU5hbWVdKVxuICAgICAgcmV0dXJuIGlkYi5wdXQoY3VzdG9tLCB2YWx1ZSwga2V5KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmcgfCBudW1iZXIgfCBBcnJheUJ1ZmZlciB8IERhdGV9IGtleVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHVuZGVmaW5lZD59XG4gICAqL1xuICBkZWwgKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9kYi50aGVuKGRiID0+IHtcbiAgICAgIGNvbnN0IFtjdXN0b21dID0gaWRiLnRyYW5zYWN0KGRiLCBbY3VzdG9tU3RvcmVOYW1lXSlcbiAgICAgIHJldHVybiBpZGIuZGVsKGN1c3RvbSwga2V5KVxuICAgIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/y-indexeddb/src/y-indexeddb.js\n");

/***/ })

};
;